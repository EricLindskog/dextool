#include "stub_class_in_ns.hpp"

namespace foo {
namespace bar {
namespace StubInternalSmurf {
void StubInit(StubopAssign_Smurf* value) {
    char* d = reinterpret_cast<char*>(value);
    char* end = d + sizeof(StubopAssign_Smurf);
    for (; d != end; ++d) {
        *d = 0;
    }
}

void StubInit(StubStubDtor* value) {
    char* d = reinterpret_cast<char*>(value);
    char* end = d + sizeof(StubStubDtor);
    for (; d != end; ++d) {
        *d = 0;
    }
}

StubStubData::StubStubData() {
    StubInit(&stub_opAssign_Smurf);
    StubInit(&stub_StubDtor);
}

StubStubData::~StubStubData() {
}

StubInternalSmurf::StubopAssign_Smurf& StubStubData::opAssign_Smurf() {
    return stub_opAssign_Smurf;
}

StubInternalSmurf::StubStubDtor& StubStubData::StubDtor() {
    return stub_StubDtor;
}

} //NS:StubInternalSmurf

foo::bar::Smurf & StubSmurf::operator=(const foo::bar::Smurf & other) {
    Stub_data.opAssign_Smurf().call_counter++;
    Stub_data.opAssign_Smurf().param_other = const_cast<Smurf*>(&other);

    if (Stub_data.opAssign_Smurf().callback != 0) {
        return Stub_data.opAssign_Smurf().callback->opAssign_Smurf(other);
    }
    else {
        return *Stub_data.opAssign_Smurf().stub_return;
    }
}

StubSmurf::StubSmurf() {
}

StubSmurf::StubSmurf(const foo::bar::Smurf & other) {
}

StubSmurf::~StubSmurf() {
    Stub_data.StubDtor().call_counter++;

    if (Stub_data.StubDtor().callback != 0) {
        Stub_data.StubDtor().callback->StubDtor();
    }
}

StubInternalSmurf::StubStubData& StubSmurf::GetStub() {
    return Stub_data;
}

} //NS:bar

} //NS:foo

